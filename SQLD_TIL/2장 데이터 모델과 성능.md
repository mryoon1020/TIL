# 2장

### 데이터 모델과 성능

31. 

- 성능데이터 모델

- 개념
  - 데이터 베이스 성능 향상을 목적으로 설계단계의 데이터 모델링 때부터 성능과 관련된 사항이 데이터 모델링에 반영 될 수 있도록 하는 것
  - 분석 및 설계 단계에서 부터 성능과 관련한 데이터 모델링을 수행하는것
  - ex) 정규화, 반정규화, 테이블 분할, 테이블 병합, 테이블 추가, 칼럼 추가, PK/FK 조정, 슈퍼타입/서브타입 조정
- 성능 데이터 모델링이 분석단계 때부터 성능과 관련한 여러방안들을 모델링에 반영하는 것을 의미하며 문제 발생 시점에 SQL튜닝을 수행하는 것은 성능 데이터 모델링과 거리가 멀다
- 데이터의 증가가 빠를수록 성능 저하에 따른 성능 개선비용은 증가함
  - 비용증가와 관련된 예로 데이터의 크기가 문제가 되어 테이블 분할을 하게 되는 경우 이로인해 할일이 많아진다
- 데이터 모델은 성능을 튜닝하면서 변경이 될 수있는 특징이 있음
  - 테이블 분할, 테이블 병합, 테이블 추가와 같은 방법들의 마련과 적용을 수행
- 분석/설계단계에서 성능을 고려한 데이터 모델링을 수행할 경우 성능저하에 따른 Rework비용을 최소화 할 수 있는 기회를 가지게 된다.

32. 

- 정규화
  - 중복을 허용하지 않는 것이 목표(최소한의 중복)
  - 테이블이 분해됨
  - 데이터를 구조화함
  - 이상이 있는 관계를 재구성하여 작고 잘 조직된 관계를 생성하는 것이 목표임
- 성능데이터 모델링 수행절차
  1. 데이터 모델링을 할때 정규화를 정확하게 수행한다
  2. 데이터 베이스 용량 산정을 수행한다
  3. 데이터베이스에 발생되는 트랜잭션의 유형을 파악한다
  4. 용량과 트랜잭션의 유형에 따라 반정규화(역정규화)를 수행한다
  5. 이력모델의 조정, PK/FK조정, 슈퍼타입/서브타입 조정 등을 수행한다
  6. 성능관점에서 데이터모델을 검증한다

33. 

- 요약
  1. 정규화수행
  2. DB용량 산정
  3. 트랜잭션 유형파악
  4. 반정규화
  5. PK/FK 조정
  6. 데이터 모델 검증

34. 

- 성능데이터 모델링
  - 분석 및 설계단계에서 부터 성능과 관련한 데이터 모델링을 수행하는것임
  - 정규화는 항상 조회성능 저하를 나태내진 않음
- 용량산정은 전체적인 데이터베이스에 발생되는 트랜잭션의 유형과 양을 분석하는 자료가 되므로 성능 데이터 모델링을 할 때 중요한 작업이 될 수 있음
  - 데이터는 트랜잭션에 의해 생성됨
  - 날이 지날수록 데이터의 양은 증가함
  - 데이터와 트랙잭션은 밀접한 관계임
- 물리적인 데이터 모델링을 할 때 PK/FK의 칼럼의 순서조정, FK인덱스 생성 등은 선능 향상을 위한 데이터 모델링 작업에 중요한 요소가 됨
- 이력데이터는 시간에 따라 반복적으로 발생이 되기 때문에 대량데이터일 가능성이 높아 특별히 성능을 고려하여 칼럼 등을 추가하도록 설계 해야함
  - 변경이력과 관련하여 최근값에 대한 조회가 빈번할 경우를 위해 "최신여부"와 같은 기능성 칼럼을 추가하여 이용하기도 함

35. 36. 37. 38. 39. 40.

- 책필기 참조

- 2차 정규화

  - 부분집합을 분리해내는 것

- 1차 정규화

  - 중복 속성에 대한 분리
  - 로우 단위, 칼럼 단위의 중복도 1차 정규화의 대상임

- 반정규화

  - 개념

    - 정규화된 엔터티, 속성, 관계에 대해 시스템의 성능향상과 개발(Development)과 운영(Maintenance)의 단순화를 위해 중복, 통합, 분리 등을 수행하는 데이터 모델링의 기법을 의미
    - 데이터를 중복하여 성능을 향상시키기 위한 기법이라 정의 가능
    - 넓은 의미로 정규화된 데이터 모델에서 중복, 통합, 분리 등을 수행하는 모든 과정을 의미
    - 데이터 무결성이 깨질 수도 있음
    - **디스크 I/O량이 많아**서 성능이 저하되거나 **경로가 너무 멀어 조인으로 인한** 성능 저하가 예상되거나 **칼럼을 계산하여 읽을 때** 성능이 저하될 것이 예상되는 경우 반정규화를 수행함

  - 기법

    - 테이블 분할
    - 테이블 병합
    - 테이블 추가(중복/통계/이력/부분데이터)
    - 칼럼추가(중복/파생/기능칼럼)
    - PK/FK 조정
    - 슈퍼타입/서브타입 조정

    

