여기에 기록되는 모든 내용은 유튜브 흥달쌤 채널의 강의에서 개인 공부 목적으로 기록함

링크 : https://www.youtube.com/watch?v=MMhC3N2RE_s

# 03강 fork 함수

- 예제

- 다음은 리눅스 환경에 서 fork()시스템 호출을 이용하여 자식 프로세스를 생성하는 C프로그램이다.

  출력결과로 옳은 것은?

  (단, "pid = fork();") 문장의 수행 결과 자식 프로세스의 생성을 성공하였다고 가정한다고 가정한다.)

```c
int i = 0, v = 1, n =5;
pid_t pid;
pid = fork();
//-----------------------------------------------
if(pid < 0){
    for(i = 0; i<n; i++)v+=(i+1);
    printf("c =%=d", v);
}
else if(pid == 0){
    for(i=0; i<n; i++)v*=(i+1);
    printf("b=%d", v);
}
else{
    wait(NULL);
    for(i=0; i<n; i++)v+=1;
    printf("a=%d", v);
}
```

```c
//해설

int i = 0, v = 1, n =5;
pid_t pid; //프로세스를 생성할 수 있는 라이브러리, fork()사용을 위함
pid = fork();
//fork()사용시 부모 프로세스, 자식 프로세스 생성,
//자식생성 실패시 -1 리턴, 성공시 0 리턴 부모프로세스는 0보다 큰값을 받음
//실행 순서는 부모 => 자식 순서로 실행됨

//-----------------------------------------------
if(pid < 0){
    for(i = 0; i<n; i++)v+=(i+1);
    printf("c =%=d", v);
}
else if(pid == 0){
    for(i=0; i<n; i++)v*=(i+1);
    printf("b=%d", v);
}
else{
    wait(NULL);
    //wait로 인해 부모프로세스 임시중단
    //자식프로세스 시작
    //자식프로세스 종료후 부모 프로세스 다시 시작
    for(i=0; i<n; i++)v+=1;
    printf("a=%d", v);
}

//정답
b = 120, a = 6
    
//wait()가 없으면
a = 6, b = 120
```

